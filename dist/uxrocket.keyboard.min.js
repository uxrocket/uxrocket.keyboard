/*! UX Rocket Keyboard 
 *  jQuery based Keyboard plugin 
 *  @author Emrah Kumru <emrahkumru.com> 
 *  @version 0.1.0 
 *  @build Fri Mar 31 2017 15:49:40 GMT+0300 (EEST) 
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(t){"use strict";var e,s=1,a="uxrScreenKeyboard",n={isLog:!1,defaultKeyboard:!1,format:"trq",type:"alphanumeric"},r={prefix:"uxr-",rocket:"uxRocket",data:a,name:"screenKeyboard",wrap:"uxr-plugin-wrap",classes:{ready:"ready",hidden:"hidden",button:"button",close:"close",numbers:"numbers",characters:"characters","delete":"button-del",enter:"button-enter",space:"button-space",capslock:"button-capslock",zero:"button-zero",line:"line"},attr:{"delete":"data-trigger='delete'",space:"data-trigger='space'",close:"data-trigger='toggle'",capslock:"data-trigger='capslock'",enter:"data-trigger='enter'"}},i={wrap:'<div class="{{wrapClass}} {{hidden}}" id="{{wrapId}}"><div class="{{closeClass}}"><a href="#" class="'+r.classes.button+'"'+r.attr.close+">X</a></div></div>",buttons:'{{#each buttons}}<a href="#" class="'+r.classes.button+'{{#if buttons.class}} {{buttons.class}}{{/if}}" {{#if buttons.attr}} {{buttons.attr}}{{/if}}>{{buttons.text}}</a>{{/each}}',line:'{{#each lines}}<div class="line-{{lines.index}}"></div>{{/each}}',div:'<div class="{{#each classes}} {{classes.class}} {{/each}}"> </div>'},c={numeric:{1:[{text:1},{text:2},{text:3}],2:[{text:4},{text:5},{text:6}],3:[{text:7},{text:8},{text:9}],4:[{text:0,"class":r.classes.zero}]},alphanumeric:{trq:{1:[{text:"q"},{text:"w"},{text:"e"},{text:"r"},{text:"t"},{text:"y"},{text:"u"},{text:"ı"},{text:"o"},{text:"p"},{text:"ğ"},{text:"ü"}],2:[{text:"a"},{text:"s"},{text:"d"},{text:"f"},{text:"g"},{text:"h"},{text:"j"},{text:"k"},{text:"l"},{text:"ş"},{text:"i"}],3:[{text:"z"},{text:"x"},{text:"c"},{text:"v"},{text:"b"},{text:"n"},{text:"m"},{text:"ö"},{text:"ç"}]},eng:{1:[{text:"q"},{text:"w"},{text:"e"},{text:"r"},{text:"t"},{text:"y"},{text:"u"},{text:"i"},{text:"o"},{text:"p"}],2:[{text:"a"},{text:"s"},{text:"d"},{text:"f"},{text:"g"},{text:"h"},{text:"j"},{text:"k"},{text:"l"}],3:[{text:"z"},{text:"x"},{text:"c"},{text:"v"},{text:"b"},{text:"n"},{text:"m"}]}},specialButtons:{enter:[{text:"Geç","class":r.classes.enter,attr:r.attr.enter}],"delete":[{text:"Sil","class":r.classes["delete"],attr:r.attr["delete"]}],space:[{text:"Boşluk","class":r.classes.space,attr:r.attr.space}],capslock:[{text:"Caps Lock","class":r.classes.capslock,attr:r.attr.capslock}]}},o=new window.uxrPluginUtils({ns:r}),l=function(e,r){var i=t(e);this._instance=s,this._name=a,this._defaults=n,this.el=e,this.$el=i,this.id="uxr-keyboard-"+s,this.terms={},this.options=t.extend(!0,{},n,r,i.data()),this.lastTerm=null,this.wrap=null,this.keyboard=null,this.capslock=!1,s++,this.init()};t.extend(l.prototype,{init:function(){this.createLayout(),this.bindUIActions()},log:function(t,e,s){if(n.isLog)return t=t||"",e=e||"",s=s||"",console.log(e,s+" >>> "+t)},bindUIActions:function(){var e=this,s={nodes:function(){var s=e.$el;t(s).on("click touchstart",function(t){e.log("Keyboard called",this,t.type),e.toggle(),t.preventDefault()})},buttons:function(){var a=t(e.keyboard).find("a."+r.classes.button);a.on("click touchstart",function(t){e.log("triggered this button",this,t.type),s.trigger(this.dataset.trigger,this.text),t.preventDefault()})},trigger:function(t,e){return s[t]?s[t].apply():s.chars(e)},toggle:function(){return e.toggle()},chars:function(t){return e.$el.val(e.$el.val()+t)},enter:function(){return"function"==typeof e.options.submit?e.options.submit():e.$el.closest("form").submit()},space:function(){return e.$el.val(e.$el.val()+" ")},capslock:function(){var s=e.keyboard.find("."+r.classes.line+" a."+r.classes.button);e.capslock?(s.each(function(){t(this).data("trigger")||t(this).html(t(this).text().toLowerCase())}),e.capslock=!1):(s.each(function(){if(!t(this).data("trigger"))return t(this).html(t(this).text().toUpperCase())}),e.capslock=!0)},"delete":function(){return e.$el.val(String(e.$el.val()).substring(0,e.$el.val().length-1))}};s.nodes(),s.buttons()},createLayout:function(){var e=this,s={wrap:function(){var t={wrapClass:r.wrap,hidden:r.classes.hidden,wrapId:e.id,closeClass:r.classes.close};return o.render(i.wrap,t)},lines:function(){var a=t(s.div({classes:[{"class":e.options.type},{"class":e.options.format}]}));return a.append(s[e.options.type])},div:function(t){return o.render(i.div,t)},numeric:function(){var a=c[e.options.type],n=c.specialButtons["delete"].concat(c.specialButtons.enter),l=t(s.div({classes:[{"class":r.classes.line}]})).append(o.render(i.buttons,{buttons:a[1]})),d=t(s.div({classes:[{"class":r.classes.line}]})).append(o.render(i.buttons,{buttons:a[2]})),u=t(s.div({classes:[{"class":r.classes.line}]})).append(o.render(i.buttons,{buttons:a[3]})),p=t(s.div({classes:[{"class":r.classes.line}]})).append(o.render(i.buttons,{buttons:a[4]}),o.render(i.buttons,{buttons:n}));return[l,d,u,p]},alphanumeric:function(){var a=c[e.options.type][e.options.format],n=c.numeric[1].concat(c.numeric[2],c.numeric[3],c.numeric[4]),l=c.specialButtons.enter.concat(c.specialButtons.space,c.specialButtons["delete"],c.specialButtons.capslock),d=t(s.div({classes:[{"class":r.classes.line}]})).append(o.render(i.buttons,{buttons:n})),u=t(s.div({classes:[{"class":r.classes.line}]})).append(o.render(i.buttons,{buttons:a[1]})),p=t(s.div({classes:[{"class":r.classes.line}]})).append(o.render(i.buttons,{buttons:a[2]})),x=t(s.div({classes:[{"class":r.classes.line}]})).append(o.render(i.buttons,{buttons:a[3]})),h=t(s.div({classes:[{"class":r.classes.line}]})).append(o.render(i.buttons,{buttons:l}));return[d,u,p,x,h]}},a=t(s.lines());t(s.wrap()).append(a).appendTo(t("body")),e.keyboard=t("#"+this.id),e.log("created keyboard for this node ",e.$el)},toggle:function(){return this.closeAll(),this.log("keyboard toggled it for this node  ",this.$el),t(this.keyboard).hasClass(r.classes.hidden)?t(this.keyboard).removeClass(r.classes.hidden):t(this.keyboard).addClass(r.classes.hidden)},closeAll:function(){return this.log("closed all other keyboard"),t("."+r.wrap+":not(#"+this.id+")").addClass(r.classes.hidden)}}),e=t.fn.Keyboard=t.fn.uxrscreenKeyboard=function(e){return this.each(function(){t.data(this,r.data)||t.data(this,r.data,new l(this,e))})},e.version="1.0.0",e.settings=n,e.namespace=r});